<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Doucite</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="wrap">
    <div class="toolbar">
      <div class="brand">Doucite</div>
      <div class="controls">
        <select id="style"><option value="apa">APA 7</option><option value="mla">MLA 9</option><option value="chicago">Chicago</option><option value="ieee">IEEE</option><option value="harvard">Harvard</option><option value="vancouver">Vancouver</option></select>
        <button id="rescan">↻</button>
        <button id="darkmode">☾</button>
      </div>
    </div>

    <div class="panel">
      <div class="panel-header">Metadata</div>
      <div class="grid">
        <label>Title<input id="title" type="text"></label>
        <label>Author(s)<input id="authors" type="text" placeholder="Comma separated (Last, First)"></label>
        <label>Date<input id="date" type="text" placeholder="YYYY-MM-DD or 3 December 2020"></label>
        <label>Publisher<input id="publisher" type="text"></label>
        <label>URL<input id="url" type="text"></label>
        <label>DOI<input id="doi" type="text" placeholder="10.xxxx/....."></label>
      </div>
      <div class="panel-actions">
        <button id="apply" class="primary">Apply changes</button>
        <label><input id="lockCitation" type="checkbox"> Lock citation (freeze preview)</label>
        <span id="status" class="status" aria-live="polite"></span>
      </div>
    </div>

    <div class="panel">
      <div class="panel-header">Overrides</div>
      <div class="overrides">
        <button id="loadAuto">Load auto</button>
        <button id="loadPageOverride">Load page override</button>
        <button id="savePageOverride">Save page override</button>
        <button id="clearPageOverride">Clear page override</button>
        <button id="loadSiteOverride">Load site override</button>
        <button id="saveSiteOverride">Save site override</button>
        <button id="clearSiteOverride">Clear site override</button>
      </div>
      <div class="hint">Page override bound to exact URL; site override applies to domain.</div>
    </div>

    <div class="panel">
      <div class="panel-header">Options</div>
      <div class="options">
        <label><input id="includeAccessed" type="checkbox" checked> Include “Retrieved” date</label>
        <label><input id="sentenceCase" type="checkbox" checked> Sentence case title (APA)</label>
        <label><input id="useCorporateAuthor" type="checkbox" checked> Use publisher when author missing</label>
        <label><input id="pdfSuffix" type="checkbox" checked> Append “[PDF]” when detected</label>
      </div>
    </div>

    <div class="panel">
      <div class="panel-header">Preview</div>
      <textarea id="output" rows="6" readonly></textarea>
      <div class="panel-actions">
        <button id="copy" class="primary">Copy citation</button>
        <button id="copyBib">Copy BibTeX</button>
        <button id="copyRIS">Copy RIS</button>
        <button id="copyCSL">Copy CSL-JSON</button>
      </div>
    </div>

    <div class="panel">
      <div class="panel-header">Batch</div>
      <div class="batch">
        <button id="collectCurrent">Add current page</button>
        <button id="collectAllTabs">Add all tabs</button>
        <button id="clearBatch">Clear list</button>
        <select id="batchStyle"><option value="apa">APA 7</option></select>
        <button id="exportBatch">Export list</button>
      </div>
      <div id="batchList" class="batch-list"></div>
    </div>

    <div class="credits">By <strong>changcheng967</strong></div>
  </div>

  <script src="utils.js"></script>
  <script src="popup.js"></script>
</body>
</html>
